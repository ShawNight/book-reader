# 悦读 Flutter - 使用指南

## 📚 功能特性

✅ **书源导入** - 支持导入JSON格式书源
✅ **小说搜索** - 多书源并发搜索
✅ **书架管理** - 收藏/删除书籍（NEW！）
✅ **章节目录** - 完整章节列表
✅ **小说阅读** - 左右翻页、章节跳转
✅ **进度追踪** - 自动保存阅读进度（NEW！）
✅ **离线缓存** - 自动缓存章节内容

## 🚀 如何运行

### Linux桌面版（推荐测试）
```bash
cd /home/shawnight/项目工作/book-reader
./run.sh
```

或直接运行：
```bash
/home/shawnight/flutter/bin/flutter run -d linux
```

### Android版（需要Android SDK）
```bash
export ANDROID_HOME=/path/to/Android/Sdk
flutter build apk --debug
# APK位置: build/app/outputs/flutter-apk/app-debug.apk
```

## 📖 使用流程

### 第一步：导入书源
1. 点击底部"书源"标签
2. 点击右上角"+"按钮
3. 选择项目根目录下的 `书源.json`
4. 等待导入成功提示（成功导入 5 个书源）

### 第二步：搜索并收藏小说
**方式1：搜索结果直接添加**
1. 点击底部"书架"标签
2. 点击右上角搜索按钮🔍
3. 输入小说名称（如"斗破"）
4. 点击搜索结果右侧的 ⊕ 按钮
5. 提示"《斗破苍穹》已加入书架"

**方式2：章节页面收藏**
1. 搜索小说后点击进入章节列表
2. 点击右上角书签图标🔖
3. 书签变实心表示已收藏

### 第三步：阅读小说
1. 在书架中点击收藏的书籍
2. 进入章节列表
3. 点击任意章节开始阅读
4. 点击屏幕显示/隐藏控制栏
5. 使用"上一章"/"下一章"按钮切换
6. 阅读进度自动保存

### 管理书架
- **查看进度：** 书架中显示"读到：第X章"
- **删除书籍：** 左滑书籍显示删除选项
- **继续阅读：** 点击书籍直接进入章节列表

## 🎨 界面说明

### 书架页
- 搜索按钮：进入小说搜索
- 显示阅读历史（待实现）

### 书源页
- 显示已导入的书源列表
- 绿色✓ = 已启用
- 灰色✗ = 已禁用

### 阅读页
- 米黄色背景护眼
- 点击屏幕显示控制栏
- 左右滑动翻页
- 底部显示章节进度
- 右上角列表按钮查看所有章节

## ⚠️ 注意事项

1. **书源格式**：必须是阅读3.0兼容的JSON格式
2. **网络要求**：搜索和阅读需要网络连接
3. **内容版权**：仅供学习Flutter开发，请支持正版
4. **数据备份**：书架数据存储在本地，建议定期备份

## 🐛 已知问题

- [ ] 部分书源规则解析可能不完整
- [ ] 缺少阅读进度保存（已实现✅）
- [ ] 缺少书架管理功能（已实现✅）
- [ ] 书架排序方式（暂只支持添加时间）
- [ ] 批量管理书籍（多选删除）
- [ ] 阅读统计功能
- [ ] 字体/背景设置

## 🔧 技术栈

- Flutter 3.x
- Riverpod 状态管理
- Dio 网络请求
- HTML 解析
- JSON 序列化
