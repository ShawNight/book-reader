#!/bin/bash

echo "╔════════════════════════════════════════════════╗"
echo "║       悦读 Flutter - 完整功能演示              ║"
echo "╚════════════════════════════════════════════════╝"
echo ""

# 检查应用是否运行
if pgrep -f "yuedu_flutter" > /dev/null; then
    echo "✅ 应用已在运行"
else
    echo "🚀 启动应用..."
    cd "/home/shawnight/项目工作/book-reader"
    ./build/linux/x64/debug/bundle/yuedu_flutter > /dev/null 2>&1 &
    sleep 3
    echo "✅ 应用已启动"
fi

echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "📚 完整功能列表"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

echo "1️⃣  书源管理"
echo "   • 导入书源（JSON格式）"
echo "   • 查看书源列表"
echo "   • 显示启用状态"
echo ""

echo "2️⃣  小说搜索"
echo "   • 多书源并发搜索"
echo "   • 显示搜索结果"
echo "   • 显示封面、作者、最新章节"
echo ""

echo "3️⃣  书架功能 ⭐ NEW"
echo "   • 搜索结果直接添加（⊕按钮）"
echo "   • 章节页面收藏（书签按钮）"
echo "   • 书架列表展示"
echo "   • 左滑删除书籍"
echo "   • 显示阅读进度"
echo ""

echo "4️⃣  章节列表"
echo "   • 完整章节目录"
echo "   • 收藏/取消收藏"
echo "   • 刷新章节"
echo ""

echo "5️⃣  阅读功能"
echo "   • 左右滑动翻页"
echo "   • 章节预加载"
echo "   • 阅读控制栏"
echo "   • 上一章/下一章"
echo "   • 章节列表弹窗"
echo "   • 自动保存进度 ⭐ NEW"
echo ""

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "📖 使用流程"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

echo "【第一次使用】"
echo "  1. 导入书源：书源标签 → + → 选择书源.json"
echo "  2. 搜索小说：书架标签 → 🔍 → 输入'斗破'"
echo "  3. 加入书架：点击右侧⊕按钮"
echo "  4. 开始阅读：点击书籍 → 选择章节"
echo ""

echo "【日常使用】"
echo "  1. 打开书架查看收藏"
echo "  2. 点击书籍继续阅读"
echo "  3. 左滑删除不想看的书"
echo "  4. 搜索添加新书"
echo ""

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "💡 操作提示"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

echo "书架页面："
echo "  • 点击书籍 → 进入章节列表"
echo "  • 左滑书籍 → 删除"
echo "  • 右上角🔍 → 搜索新书"
echo ""

echo "搜索结果："
echo "  • 点击右侧⊕ → 直接加入书架"
echo "  • 点击书籍 → 查看章节列表"
echo ""

echo "章节列表："
echo "  • 右上角书签 → 收藏/取消收藏"
echo "  • 实心书签 = 已在书架"
echo "  • 空心书签 = 未在书架"
echo ""

echo "阅读页面："
echo "  • 点击屏幕 → 显示控制栏"
echo "  • 左右滑动 → 翻页"
echo "  • 右上角📋 → 章节列表"
echo "  • 自动保存 → 阅读进度"
echo ""

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "📊 功能统计"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

echo "✅ 已实现功能：9个"
echo "   1. 书源导入"
echo "   2. 小说搜索"
echo "   3. 章节列表"
echo "   4. 小说阅读"
echo "   5. 书架管理"
echo "   6. 收藏书籍"
echo "   7. 删除书籍"
echo "   8. 阅读进度"
echo "   9. 章节缓存"
echo ""

echo "📝 代码统计："
echo "   • 新增文件：10+"
echo "   • 代码行数：2000+"
echo "   • 测试覆盖：基础功能"
echo ""

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "📚 相关文档"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

echo "  • README.md - 快速开始指南"
echo "  • BOOKSHELF_GUIDE.md - 书架功能详解"
echo "  • UI_GUIDE.md - 界面说明"
echo "  • TEST_REPORT.md - 测试报告"
echo ""

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

echo "🎉 现在你的阅读App已经功能完整了！"
echo ""
echo "快去试试吧！"
echo ""
